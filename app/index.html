<!DOCTYPE html>
<html lang="en" class="dark">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Expense Tracker Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="./js/index.js" defer></script>
  <script src="./js/listSection.js" defer></script>
  <script src="./js/homeSection.js" defer></script>
  <link rel="stylesheet" href="./css/index.css">
  <link rel="stylesheet" href="./css/color.css">
</head>

<body class="transition-colors duration-300">
  <!-- Navbar -->
  <header class="fixed top-0 left-0 w-full bg-accent text-color z-50 shadow">
    <div class="flex items-center justify-between px-4 py-3 text-white">
      <h1 class="text-lg font-semibold">Expense Tracker</h1>
    </div>
  </header>

  <!-- Sidebar and Content -->
  <div class="flex pt-14 pb-9 h-screen overflow-hidden">
    <!-- Sidebar -->
    <aside id="sidebar"
      class="fixed md:static z-40 w-64 bg-surface shadow p-4 transition-all duration-300 ease-in-out hidden md:block h-full">
      <!-- <h2 class="text-2xl font-bold text-center mb-6">ğŸ’° Dashboard</h2> -->
      <ul class="space-y-4">
        <li>
          <button onclick="showSection('home')" class="w-full text-left hover:text-accent">
            ğŸ  Home
          </button>
        </li>
        <li>
          <button onclick="showSection('add')" class="w-full text-left hover:text-accent">
            â• Add Expense
          </button>
        </li>
        <li>
          <button onclick="showSection('list')" class="w-full text-left hover:text-accent">
            ğŸ“‹ List Expenses
          </button>
        </li>
        <li>
          <button onclick="showSection('search')" class="w-full text-left hover:text-accent">
            ğŸ” Search
          </button>
        </li>
        <li>
          <button onclick="showSection('calendar')" class="w-full text-left hover:text-accent">
            ğŸ“… Calendar
          </button>
        </li>
        <li>
          <button onclick="showSection('settings')" class="w-full text-left hover:text-accent">
            âš™ï¸ Settings
          </button>
        </li>
      </ul>
    </aside>

    <!-- Mobile Sidebar Toggle -->
    <div id="menuToggle" class="md:hidden fixed top-1 right-4 z-50">
      <button onclick="toggleSidebar()" class="text-lg text-white px-4 py-2">
        â˜°
      </button>
    </div>
    <!-- Main Content -->
    <main class="flex-1 p-6 overflow-y-auto w-full h-full">
      <!-- Home Section -->
      <section id="home" class="section grid grid-cols-1 md:grid-cols-2 gap-4">
        <!-- Daily Spending -->
        <div class="bg-surface p-4 rounded shadow flex justify-center">
          <div class="w-full max-w-xl">
            <h2 class="text-lg font-semibold mb-2">ğŸ“… Daily Spending</h2>
            <canvas id="dailyChart" class="w-full h-auto"></canvas>
          </div>
        </div>
        <!-- Top Expenses -->
        <div class="bg-surface p-4 rounded shadow flex justify-center">
          <div class="w-full max-w-xl">
            <h2 class="text-lg font-semibold mb-2">ğŸ”¥ Top Expenses</h2>
            <canvas id="topExpensesChart" class="w-full h-auto"></canvas>
          </div>
        </div>
        <div class="bg-surface p-4 rounded shadow flex flex-col">
          <h2 class="text-lg font-semibold mb-2 text-left">ğŸ’¹ Category Overview</h2>
          <div class="w-full flex justify-center">
            <div class="w-full max-w-sm">
              <canvas id="categoryChart" class="w-full h-auto"></canvas>
            </div>
          </div>
        </div>
        <!-- Payment Mode -->
        <div class="bg-surface p-4 rounded shadow flex justify-center flex-col">
          <h2 class="text-lg font-semibold mb-2 text-left">ğŸ’³ Payment Mode</h2>
          <div class="w-full flex justify-center">
            <div class="w-full max-w-sm">
              <canvas id="paymentChart" class="w-full h-auto"></canvas>
            </div>
          </div>
        </div>
      </section>



      <!-- Add Section -->
      <section id="add" class="section hidden">
        <h1 class="text-2xl font-bold mb-6 text-accent">â• Add Expense</h1>
        <form id="expenseForm" class="space-y-4 bg-surface p-4 rounded shadow text-[var(--color-text)]">
          <input type="hidden" name="expense_id" />

          <!-- ğŸ’° Amount -->
          <div>
            <label class="block mb-1 font-medium">Amount</label>
            <input type="number" name="amount" class="w-full p-2 rounded border" required
              style="background-color: var(--input-bg); color: var(--input-text); border-color: var(--input-border);" />
          </div>

          <!-- ğŸ§¾ Category + Subcategory (Flex Row) -->
          <div class="flex flex-col md:flex-row md:space-x-4">
            <!-- Category -->
            <div class="w-full md:w-1/2">
              <label class="block mb-1 font-medium">Category</label>
              <select name="category_id" required class="w-full p-2 rounded border"
                style="background-color: var(--input-bg); color: var(--input-text); border-color: var(--input-border);">
                <option value="">Select Category</option>
                <option value="1">Food</option>
                <option value="2">Travel</option>
                <option value="3">Bills</option>
              </select>
            </div>

            <!-- Subcategory -->
            <div class="w-full md:w-1/2 mt-4 md:mt-0">
              <label class="block mb-1 font-medium">Subcategory</label>
              <input type="text" name="subcategory" class="w-full p-2 rounded border"
                style="background-color: var(--input-bg); color: var(--input-text); border-color: var(--input-border);" />
            </div>
          </div>

          <!-- ğŸ“… Date + Time (Flex Row) -->
          <div class="flex flex-col md:flex-row md:space-x-4">
            <!-- Date -->
            <div class="w-full md:w-1/2">
              <label class="block mb-1 font-medium">Date</label>
              <input type="date" id="expenseDate" name="date" required class="w-full p-2 rounded border"
                style="background-color: var(--input-bg); color: var(--input-text); border-color: var(--input-border);" />
            </div>
            <!-- Time -->
            <div class="w-full md:w-1/2 mt-4 md:mt-0">
              <label class="block mb-1 font-medium">Time</label>
              <input type="time" id="expenseTime" name="time" class="w-full p-2 rounded border"
                style="background-color: var(--input-bg); color: var(--input-text); border-color: var(--input-border);" />
            </div>

          </div>

          <!-- ğŸ’³ Payment Mode (Dropdown) -->
          <div>
            <label class="block mb-1 font-medium">Payment Mode</label>
            <select name="payment_mode" class="w-full p-2 rounded border"
              style="background-color: var(--input-bg); color: var(--input-text); border-color: var(--input-border);">
              <option value="UPI">UPI</option>
              <option value="Cash">Cash</option>
              <option value="Others">Others</option>
            </select>
          </div>

          <!-- ğŸ“ Note -->
          <div>
            <label class="block mb-1 font-medium">Note</label>
            <textarea name="note" rows="2" class="w-full p-2 rounded border resize-none"
              style="background-color: var(--input-bg); color: var(--input-text); border-color: var(--input-border);"></textarea>
          </div>

          <!-- ğŸ“ Location -->
          <div>
            <label class="block mb-1 font-medium">Location</label>
            <input type="text" name="location" class="w-full p-2 rounded border"
              style="background-color: var(--input-bg); color: var(--input-text); border-color: var(--input-border);" />
          </div>

          <div>
            <button type="submit" class="bg-accent text-white px-4 py-2 rounded w-full"
              style="background-color: var(--color-accent);">
              Add Expense
            </button>
          </div>
        </form>


      </section>

      <!-- List Section -->
      <section id="list" class="section hidden">
        <h1 class="text-2xl font-bold mb-6 text-accent">
          ğŸ“‹ List of Expenses
        </h1>

        <!-- Table Wrapper -->
        <div class="overflow-x-auto bg-surface rounded shadow">
          <table id="expenseTable" class="min-w-full table-auto">
            <thead>
              <tr class="bg-accent text-white">
                <th class="text-left px-4 py-3 cursor-pointer" onclick="sortTable(0)">
                  Amount
                </th>
                <th class="text-left px-4 py-3 cursor-pointer" onclick="sortTable(1)">
                  Category
                </th>
                <th class="text-left px-4 py-3 cursor-pointer" onclick="sortTable(2)">
                  Subcategory
                </th>
                <th class="text-left px-4 py-3 cursor-pointer" onclick="sortTable(3)">
                  Date
                </th>
                <th class="text-left px-4 py-3 cursor-pointer" onclick="sortTable(4)">
                  Mode
                </th>
                <th class="text-left px-4 py-3">Actions</th>
              </tr>
            </thead>
            <tbody id="expenseTableBody" class="text-color-text bg-color-surface dark:bg-color-surface">
              <!-- Rows will be inserted here -->
            </tbody>
          </table>
        </div>

        <!-- Modal -->
        <div id="expenseModal"
          class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
          <div class="bg-surface p-6 rounded shadow-md w-full max-w-md border border-gray-300 dark:border-gray-700">
            <h2 class="text-xl font-bold mb-4 text-accent">
              âœï¸ Edit Expense
            </h2>
            <form id="editForm" onsubmit="saveEdit(event)">
              <input type="hidden" id="editIndex" />
              <div class="mb-4">
                <label class="block mb-1 font-medium">Amount</label>
                <input type="number" id="editAmount" class="w-full  p-2 rounded border" required />
              </div>
              <div class="mb-4">
                <label class="block mb-1 font-medium">Subcategory</label>
                <input type="text" id="editSubcategory" class="w-full  p-2 rounded border" />
              </div>
              <div class="mb-4">
                <label class="block mb-1 font-medium">Payment Mode</label>
                <input type="text" id="editMode" class="w-full  p-2 rounded border" />
              </div>
              <div class="flex justify-end gap-2">
                <button type="button" onclick="closeModal()"
                  class="px-4 py-2 rounded bg-gray-300 dark:bg-gray-700 text-black dark:text-white">
                  Cancel
                </button>
                <button type="submit" class="px-4 py-2 rounded bg-accent text-white hover:bg-opacity-90">
                  Save
                </button>
              </div>
            </form>
          </div>
        </div>
      </section>

      <!-- Search Section -->
      <section id="search" class="section hidden">
        <h1 class="text-xl font-bold mb-4">Search</h1>
        <p>Search functionality here...</p>
      </section>

      <!-- Calendar Section -->
      <section id="calendar" class="section hidden">
        <h1 class="text-xl font-bold mb-4">Calendar</h1>
        <p>Calendar view here...</p>
      </section>

      <!-- Settings Section -->
      <section id="settings" class="section hidden">
        <h1 class="text-xl font-bold mb-4">Settings</h1>
        <div class="bg-surface p-4 rounded shadow flex items-center justify-between">
          <span class="font-medium">ğŸŒ— Toggle Dark Mode</span>
          <label class="inline-flex items-center cursor-pointer">
            <input type="checkbox" id="modeToggle" class="sr-only peer" />
            <div class="w-11 h-6 rounded-full relative transition-all duration-300"
              style="background-color: var(--color-accent)">
              <div
                class="absolute left-1 top-1 w-4 h-4 rounded-full shadow-md bg-surface transform transition peer-checked:translate-x-5">
              </div>
            </div>
          </label>
        </div>
      </section>
    </main>
  </div>

  <!-- Footer -->
  <footer class="fixed bottom-0 left-0 w-full bg-surface text-center text-sm py-2 z-50 text-muted">
    Â© 2025 Dev Namdev. All rights reserved.
  </footer>
</body>

</html>